<div class="ContrastAgentFormComponent content-component">
     <form [formGroup]="newContrastAgentForm" class="ContrastAgentFormComponent max-content" novalidate> 
		<table class="layout">
			<tr><td colspan="2">
				<span class="right-col" [ngSwitch]="mode.state">
					<ng-template [ngSwitchCase]="Modes.view"> 
						<div class="header command-zone" i18n="View contrastagent|Title">View contrast agent</div>
					</ng-template>
					<ng-template [ngSwitchCase]="Modes.edit"> 
						<div class="header command-zone" i18n="Edit contrastagent|Title">Edit contrast agent</div>
					</ng-template>
					<ng-template [ngSwitchCase]="Modes.create"> 
						<div class="header command-zone" i18n="Create contrastagent|Title">Add contrast agent</div>
					</ng-template>
				</span>
			</td></tr>
			<tr>
				<td>
					<fieldset>
					<ol>
						<li class="required">
							<label i18n="Edit contrastagent|Name label" class="required-label">Name</label>
							<span class="right-col" [ngSwitch]="mode.state">
								<ng-template [ngSwitchCase]="Modes.view"> 
										{{agent?.name?.value}}
								</ng-template>
								<ng-template ngSwitchDefault>
									<select id="name" required formControlName="name" [(ngModel)]="agent.name" (ngModelChange)="onAgentChange($event)">
										<option *ngFor="let name of agentNames" [ngValue]="name">{{name?.value}}</option>
									</select>
									<button  i18n="Edit contrastagent|Add a new contrast agent name" (click)="goToAddContrastAgent()">
										<img [src]="addIconPath"/>
										new contrast agent name
									</button>
									<label *ngIf="formErrors.name.includes('required')" class="form-validation-alert" i18n="Edit contrastagent|NameRequiredError label">Name is required!</label>
								</ng-template>
							</span>
						</li>
						<li>
							<label i18n="Edit contrastagent|ManufacturedName label">Manufactured Name</label>
							<span class="right-col" [ngSwitch]="mode.state">
								<ng-template [ngSwitchCase]="Modes.view"> 
										{{agent?.manufactured_name}}
								</ng-template>
								<ng-template ngSwitchDefault>
									<input type="text" id="manufactured_name" formControlName="manufactured_name" [(ngModel)]="agent.manufactured_name" (ngModelChange)="onAgentChange($event)"/>
								</ng-template>
							</span>
						</li>
						<li>
							<label i18n="Edit contrastagent|Dose label">Dose</label>
							<span class="right-col" [ngSwitch]="mode.state">
								<ng-template [ngSwitchCase]="Modes.view"> 
										{{agent?.dose}}
								</ng-template>
								<ng-template ngSwitchDefault>
									<input type="text" id="dose" formControlName="dose" [(ngModel)]="agent.dose" (ngModelChange)="onAgentChange($event)"/>
								</ng-template>
							</span>
						</li>
						<li>
							<label i18n="Edit contrastagent|DoseUnit label">Dose Unit</label>
							<span class="right-col" [ngSwitch]="mode.state">
								<ng-template [ngSwitchCase]="Modes.view"> 
										{{agent?.dose_unit?.value}}
								</ng-template>
								<ng-template ngSwitchDefault>
									<select id="dose_unit" formControlName="dose_unit" [(ngModel)]="agent.dose_unit" (ngModelChange)="onAgentChange($event)">
										<option *ngFor="let unit of dose_units" [ngValue]="unit">{{unit?.value}}</option>
									</select>
								</ng-template>
							</span>							
						</li>
						<li>
							<label i18n="Edit contrastagent|Concentration label">Concentration</label>
							<span class="right-col" [ngSwitch]="mode.state">
								<ng-template [ngSwitchCase]="Modes.view"> 
										{{agent?.concentration}}
								</ng-template>
								<ng-template ngSwitchDefault>
									<input type="text" id="concentration" formControlName="concentration" [(ngModel)]="agent.concentration" (ngModelChange)="onAgentChange($event)"/>
								</ng-template>
							</span> 							
						</li>
						<li>
							<label i18n="Edit contrastagent|ConcentrationUnit label">Concentration Unit</label>
							<span class="right-col" [ngSwitch]="mode.state">
								<ng-template [ngSwitchCase]="Modes.view"> 
										{{agent?.concentration_unit?.value}}
								</ng-template>
								<ng-template ngSwitchDefault>
									<select id="concentration_unit" formControlName="concentration_unit" [(ngModel)]="agent.concentration_unit" (ngModelChange)="onAgentChange($event)">
										<option *ngFor="let unit of concentration_units" [ngValue]="unit">{{unit?.value}}</option>
									</select>
								</ng-template>
							</span>							
						</li>
						<li>
							<label i18n="Edit contrastagent|InjectionInterval label">Injection interval</label>
							<span class="right-col" [ngSwitch]="mode.state">
								<ng-template [ngSwitchCase]="Modes.view"> 
										{{enumUtils.getEnumValue(intervals,agent.injection_interval)}}
								</ng-template>
								<ng-template ngSwitchDefault>
									<select id="injectionInterval" formControlName="injectionInterval" [(ngModel)]="agent.injection_interval" (ngModelChange)="onAgentChange($event)">
										<option *ngFor="let interval of intervals" [value]="interval.key">{{interval?.value}}</option>
									</select>
								</ng-template>
							</span>	
						</li>
						<li>
							<label i18n="Edit contrastagent|InjectionSite label">Injection site</label>
							<span class="right-col" [ngSwitch]="mode.state">
								<ng-template [ngSwitchCase]="Modes.view"> 
										{{enumUtils.getEnumValue(sites,agent.injection_site)}}
								</ng-template>
								<ng-template ngSwitchDefault>
									<select id="injectionSite" formControlName="injectionSite" [(ngModel)]="agent.injection_site" (ngModelChange)="onAgentChange($event)">
										<option *ngFor="let site of sites" [value]="site.key">{{site?.value}}</option>
									</select>
								</ng-template>
							</span>	
						</li>
						<li>
							<label i18n="Edit contrastagent|InjectionType label">Injection type</label>
							<span class="right-col" [ngSwitch]="mode.state">
								<ng-template [ngSwitchCase]="Modes.view"> 
										{{enumUtils.getEnumValue(injtypes,agent.injection_type)}}
								</ng-template>
								<ng-template ngSwitchDefault>
									<select id="injectionType" formControlName="injectionType" [(ngModel)]="agent.injection_type" (ngModelChange)="onAgentChange($event)">
										<option *ngFor="let injtype of injtypes" [value]="injtype.key">{{injtype?.value}}</option>
									</select>
								</ng-template>
							</span>	
						</li>						
					</ol>
					</fieldset>
				</td>
			</tr>
		</table>
		
		
    <div *ngIf="isStandalone">
	    <table class="contrast_agents_buttons">
			<tr><td colspan="2"><div class="footer command-zone">
				<button type="button" i18n="Edit contrastagent|CancelButton label" class="Button" (click)="getOut()">Cancel</button>
				<button type="button" *ngIf="canModify && mode.isCreateMode()" i18n="Edit contrastagent|CreateButton label" (click)="addContrastAgent()" class="Button" [disabled]="!newContrastAgentForm.valid">Create</button>
				<button type="button" *ngIf="canModify && mode.isEditMode()" (click)="updateContrastAgent()" i18n="Edit contrastagent|SaveButton label" class="Button" [disabled]="!newContrastAgentForm.valid">Save</button>
			</div></td></tr>
	    </table>
   	</div>
   	
     </form> 
    
    
</div>