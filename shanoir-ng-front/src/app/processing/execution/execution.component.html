<form *ngIf="pipeline" [formGroup]="executionForm" (ngSubmit)="onSubmitExecutionForm()">
    <legend>{{pipeline.name}}</legend>

    <div>
        <label for="execution_name">Execution Name *</label>
        <input type="text" id="execution_name" formControlName="execution_name" required>
    </div>
    
    <div>
        <p> Default execution parameters: please choose default parameters value for every parameter.</p>
        <p> You will be able to check every execution parameters in the following table.</p>
    </div>

    <div *ngFor="let parameter of pipeline.parameters">
        
        <div *ngIf="parameter.name != 'executable'">
             <label>{{parameter.name}} {{parameter.description}} {{parameter.isOptional ? '' : '*'}</label>
             <input *ngIf="!isAFile(parameter.type)" [type]="getParameterType(parameter.type)"
                    formControlName="{{parameter.name}}" name="{{parameter.name}}" id="{{parameter.name}}">
             <span *ngIf="isAFile(parameter.type)">
                 <select *ngIf="selectedDatasets else loading" formControlName="{{parameter.name}}" name="{{parameter.name}}" id="{{parameter.name}}">
                    <option *ngFor="let dataset of selectedDatasets" [ngValue]="dataset">
                      {{dataset.id}}_{{dataset.name}}
                    </option>
                 </select>
                 <ng-template #loading>Loading datasets...</ng-template>
             </span>
	</div>    
    </div>
    
    <button type='button' (click)="onApplyParameters()">Apply</button>
    
    <div [hidden]="!parametersApplied">
    <legend> List of executions: </legend>
    </div>
    <div [hidden]="!parametersApplied">
    <shanoir-table #executionsTable
                [getPage]="getPage.bind(this)" 
                [editMode]="true"
                [columnDefs]="columnDefs"
                [browserSearch]="false">
    </shanoir-table>
    </div>
    <div [hidden]="!parametersApplied">
    <button type="submit" [disabled]="!executionForm.valid">Run</button>
    </div>
</form>
