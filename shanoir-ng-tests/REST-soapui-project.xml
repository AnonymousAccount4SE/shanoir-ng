<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="4b67039d-2b8b-4d17-9a8f-ed5c3a888e69" activeEnvironment="Default" name="REST Shanoir-NG" soapui-version="5.3.0" abortOnError="false" runType="SEQUENTIAL" resourceRoot="" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:RestService" id="a6e8bb67-2307-4d8b-9654-14d21e054e99" wadlVersion="http://wadl.dev.java.net/2009/02" name="Shanoir NG Users Microservice" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:description>Microservice API for Shanoir NG user managment</con:description><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>${#Project#endpoint}</con:endpoint></con:endpoints><con:resource name="/role/all" path="/role/all" id="06c0c67a-00cb-42b7-848f-eecfd43c04c8"><con:settings/><con:parameters/><con:method name="findRoles" id="029ec817-e619-43d8-b693-67df0968cefa" method="GET"><con:description>Returns all the roles
</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>204</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status/><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>text/html</con:mediaType><con:status>200</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element>Response</con:element></con:representation><con:request name="Request 1" id="7f113040-e394-4bce-a620-bf2a818be1ee" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="x-auth-token" value="${#TestCase#token_auth}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://localhost/rest/role/all</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="/user" path="/user" id="4000119b-9e0f-461b-9103-59409fa8d112"><con:settings/><con:parameters/><con:method name="saveNewUser" id="700e3d8d-9363-497f-af83-9e64846c9c4d" method="POST"><con:description>Saves a new user
</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>422</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status/><con:params/></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>403 422 500</con:status><con:params/><con:element xmlns:user="http://localhost/user">user:Fault</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>401</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:user="http://localhost/user">user:Response</con:element></con:representation><con:request name="Request 1" id="e900207c-3be4-4ea9-a454-1b4012a07d82" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="x-xsrf-token" value="${#TestCase#token_xsrf}"/>
  &lt;con:entry key="x-auth-token" value="${#TestCase#token_auth}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#endpoint}</con:endpoint><con:request>{
	"username" : "${#TestCase#username}",
	"firstName" : "${#TestCase#firstName}",
	"lastName" : "${#TestCase#lastName}",
	"password" : "${#TestCase#pass}",
	"email" : "${#TestCase#email}",
	"creationDate" : "2016-11-28",
	"role" : {
      "id": 2,
      "name": "Expert",
      "accessLevel": 200
   }
}</con:request><con:originalUri>http://localhost/user</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="/user/all" path="/user/all" id="1adebb44-91d3-46ff-8279-3f357a2ea996"><con:settings/><con:parameters/><con:method name="findUsers" id="6b6b2b1b-cf12-4e56-a162-09985e9af05d" method="GET"><con:description>Returns all the users
</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>204</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status/><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>text/html</con:mediaType><con:status>200</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element>Response</con:element></con:representation><con:request name="Request 1" id="cb15771f-5c75-4a50-9843-73a0ded906bc" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="x-auth-token" value="${#TestCase#token_auth}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="/user/{userId}" path="/user/{userId}" id="703b7e16-4653-44cb-a0d6-524b533209be"><con:settings/><con:parameters><con:parameter><con:name>userId</con:name><con:style>TEMPLATE</con:style></con:parameter></con:parameters><con:method name="findUserById" id="1db64152-978d-41c1-98c9-c8409164d426" method="GET"><con:description>If exists, returns the user corresponding to the given id
</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>userId</con:name><con:style>TEMPLATE</con:style><con:description>id of the user</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status/><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ns="http://localhost/user/19">ns:Response</con:element></con:representation><con:request name="Request 1" id="8d3913ac-2ce3-4a6f-892f-9ebbd5d2cb37" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="x-auth-token" value="${#TestCase#token_auth}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#endpoint}</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="userId" value="${#TestCase#user_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method><con:method name="updateUser" id="0c245ddb-05f6-499a-8f40-7ac4c225f5da" method="PUT"><con:description>Updates a user
</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>userId</con:name><con:style>TEMPLATE</con:style><con:description>id of the user</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>204</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>422</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status/><con:params/></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>500 403</con:status><con:params/><con:element xmlns:user="http://localhost/user/">user:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="10b23131-3af2-4785-9400-5a8d813bd785" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="x-auth-token" value="${#TestCase#token_auth}"/>
  &lt;con:entry key="x-auth-token" value="${#TestCase#token_xsrf}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#endpoint}</con:endpoint><con:request>{
	"id" : "${#TestCase#user_id}",
	"username" : "${#TestCase#username}",
	"firstName" : "${#TestCase#firstName2}",
	"lastName" : "${#TestCase#lastName2}",
	"password" : "${#TestCase#newPass}",
	"email" : "${#TestCase#email}",
	"creationDate" : "2016-11-28",
	"role" : {
      "id": 2,
      "name": "Expert",
      "accessLevel": 200
   }
}</con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="userId" value="${#TestCase#user_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method><con:method name="deleteUser" id="5e6aed9f-5e85-45f1-b4ec-570a8ec85326" method="DELETE"><con:description>Deletes a user
</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>userId</con:name><con:style>TEMPLATE</con:style><con:description>id of the user</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>204</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status/><con:params/></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>403</con:status><con:params/><con:element xmlns:ns="http://localhost/user/19">ns:Fault</con:element></con:representation><con:request name="Request 1" id="904c0c10-4f1b-41f2-b2ea-497ddabfd3db" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="x-auth-token" value="${#TestCase#token_auth}"/>
  &lt;con:entry key="x-xsrf-token" value="${#TestCase#token_xsrf}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#endpoint}</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="userId" value="${#TestCase#user_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="authenticate" path="/authenticate" id="6dc49e29-63a1-45b0-82ce-e3ec5a055252"><con:settings/><con:parameters/><con:method name="authenticate" id="c8fcd575-45a4-4adc-a145-b3170a1f62d8" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>403 500</con:status><con:params/><con:element xmlns:aut="http://localhost/shanoir-ng/users/authenticate">aut:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:aut="http://localhost/shanoir-ng/users/authenticate">aut:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="ba658792-6420-46dc-95dd-7a517291e9c9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#endpoint}</con:endpoint><con:request>{
	"login": "${#Project#login}",
	"password": "${#Project#password}"
	
	}</con:request><con:originalUri>http://localhost/shanoir-ng/users/authenticate</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:testSuite id="435cb389-294b-4124-9fed-2ec60aab16e2" name="REST Shanoir-NG (admin)"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="66984b8a-40ce-4dd2-9fb6-e8739871d9a4" failOnError="true" failTestCaseOnErrors="true" keepSession="true" maxResults="0" name="TestCase" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="restrequest" name="auth" id="621771c2-da00-48fd-adce-36a01b03cee0"><con:settings/><con:config service="Shanoir NG Users Microservice" resourcePath="/authenticate" methodName="authenticate" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="auth" id="ba658792-6420-46dc-95dd-7a517291e9c9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#endpoint}</con:endpoint><con:request>{
	"login": "${#Project#login}",
	"password": "${#Project#password}"
	
	}</con:request><con:originalUri>http://localhost/shanoir-ng/users/authenticate</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="372f8373-b7bc-43d9-80b5-2f037180866b" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Existence Match" id="b74ae24c-1936-4230-adc4-41ab2884e7bc" name="JsonPath Existence Match"><con:configuration><path>$.token</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="9511342d-9e84-4e23-99d0-e3e1043ae8d4" name="JsonPath Match"><con:configuration><path>$.login</path><content>${#Project#login}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="getXSRF" id="47fb874a-60b0-4345-8962-247411bd15d1"><con:settings/><con:config><script>def getXSRF () {
	currentStepId = context.currentStepIndex
	responseContent = testRunner.testCase.getTestStepAt(currentStepId - 1)
	responseContent = responseContent.httpRequest.response.responseHeaders['Set-Cookie'];
	token_xsrf = responseContent[-1].replace('XSRF-TOKEN=','').replace(';path=/','');
	testRunner.testCase.setPropertyValue( 'token_xsrf', token_xsrf );
	return token_xsrf
}

log.info (getXSRF())
</script></con:config></con:testStep><con:testStep type="groovy" name="getAUTH" id="4d557498-8a4b-4dc1-99b3-ed31467c7edd"><con:settings/><con:config><script>import groovy.json.JsonSlurper
def getAUTH (){
	responseContent = testRunner.testCase.getTestStepByName("auth").getPropertyValue("response")
	token_auth = new JsonSlurper().parseText(responseContent).token
	testRunner.testCase.setPropertyValue( 'token_auth', token_auth );
	
	return token_auth
}

log.info( getAUTH() );

</script></con:config></con:testStep><con:testStep type="restrequest" name="findRoles" id="b6d788dd-e056-4d7c-97a8-227e8d6b9090"><con:settings/><con:config service="Shanoir NG Users Microservice" resourcePath="/role/all" methodName="findRoles" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="findRoles" id="7f113040-e394-4bce-a620-bf2a818be1ee" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="x-auth-token" value="${#TestCase#token_auth}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://localhost/rest/role/all</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="53995276-bcf2-4dfe-b8bc-3f2ee40dbfa5" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="4037fa14-3cda-444c-9cc0-a44158c664c0" name="JsonPath Count"><con:configuration><path>$</path><content>5</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="getNewXSRF1" id="9a6dec8a-fff2-4f56-ba48-20a22aebdcc3"><con:settings/><con:config><script>testRunner.runTestStepByName("getXSRF")</script></con:config></con:testStep><con:testStep type="restrequest" name="saveNewUser" id="f9012918-1323-44e6-8291-8cc822987a12"><con:settings/><con:config service="Shanoir NG Users Microservice" resourcePath="/user" methodName="saveNewUser" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="saveNewUser" id="e900207c-3be4-4ea9-a454-1b4012a07d82" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="x-xsrf-token" value="${#TestCase#token_xsrf}"/>
  &lt;con:entry key="x-auth-token" value="${#TestCase#token_auth}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#endpoint}</con:endpoint><con:request>{
	"username" : "${#TestCase#username}",
	"firstName" : "${#TestCase#firstName}",
	"lastName" : "${#TestCase#lastName}",
	"email" : "${#TestCase#email}",
	"creationDate" : "2016-11-28",
	"password" : "${#TestCase#pass}",
	"canAccessToDicomAssociation" : "true",
	"role" : {
      "id": 3

   }
	
	
	}</con:request><con:originalUri>http://localhost/user</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="46be949d-1ab6-4aee-bfcb-86f2e0104649" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="e97403df-aa1f-4dfb-8d12-36de592971f0" name="JsonPath Count id"><con:configuration><path>$.id</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="6055633a-9189-4dfa-8b11-865654d382d1" name="JsonPath username"><con:configuration><path>$.username</path><content>${#TestCase#username}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e70be0e6-c8d4-4f1c-a146-0209b13f86f2" name="JsonPath email"><con:configuration><path>$.email</path><content>${#TestCase#email}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="findUsers" id="f6e05b80-4898-42fe-8f1f-5e762d817296"><con:settings/><con:config service="Shanoir NG Users Microservice" resourcePath="/user/all" methodName="findUsers" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="findUsers" id="cb15771f-5c75-4a50-9843-73a0ded906bc" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="x-auth-token" value="${#TestCase#token_auth}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e03b4f24-c953-4eb4-8a9a-55292d0bbc5a" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="getNewXSRF2" id="df798a2a-1b29-4860-b06d-653311515f33"><con:settings/><con:config><script>testRunner.runTestStepByName("getXSRF")</script></con:config></con:testStep><con:testStep type="transfer" name="getUserId" id="d4d74c4c-8e6c-4d0c-92e9-6902518a1ae0"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>user_id</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>saveNewUser</con:sourceStep><con:sourcePath>$.id</con:sourcePath><con:targetType>user_id</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>user_id2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>saveNewUser</con:sourceStep><con:sourcePath>$.id</con:sourcePath><con:targetType>username_id</con:targetType><con:targetStep>#Project#</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="updateUser" id="6c695e00-4292-4a59-87ff-ce9320038be7"><con:settings/><con:config service="Shanoir NG Users Microservice" resourcePath="/user/{userId}" methodName="updateUser" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="updateUser" id="10b23131-3af2-4785-9400-5a8d813bd785" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="x-auth-token" value="${#TestCase#token_auth}"/>
  &lt;con:entry key="x-xsrf-token" value="${#TestCase#token_xsrf}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#endpoint}</con:endpoint><con:request>{
	"id" : "${#TestCase#user_id}",
	"username" : "${#TestCase#username}",
	"firstName" : "${#TestCase#firstName2}",
	"lastName" : "${#TestCase#lastName2}",
	"password" : "${#TestCase#newPass}",
	"email" : "${#TestCase#email}",
	"creationDate" : "2016-11-28",
	"role" : {
      "id": 4,
      "displayName": "Expert"
   }
}</con:request><con:originalUri>http://localhost/user/</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b08d75f6-de2d-4844-9e0b-00d25ff53076" name="Valid HTTP Code 204"><con:configuration><codes>204</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="userId" value="${#TestCase#user_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="getNewXSRF3" id="5b569f88-f13d-4ee9-9daf-12cc6ce8e424"><con:settings/><con:config><script>testRunner.runTestStepByName("getXSRF")</script></con:config></con:testStep><con:testStep type="restrequest" name="findUserById" id="d0d65e2c-813c-4f5f-95f5-1e1349262f2c"><con:settings/><con:config service="Shanoir NG Users Microservice" resourcePath="/user/{userId}" methodName="findUserById" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="findUserById" id="8d3913ac-2ce3-4a6f-892f-9ebbd5d2cb37" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="x-auth-token" value="${#TestCase#token_auth}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://localhost/user/19</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="9cefdfa8-6d0d-44c6-b749-bf9ae39e7289" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="6fbc5e20-1c99-4d9a-aa21-4b464067e408" name="JsonPath Match id"><con:configuration><path>$.id</path><content>${#TestCase#user_id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="09d7f3b4-33bf-4f42-a25e-3098ac29c0a3" name="JsonPath Match firstName"><con:configuration><path>$.firstName</path><content>${#TestCase#firstName2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="9155ca3f-e11e-4ceb-a61e-f5f4356ac2b8" name="JsonPath Match lastname"><con:configuration><path>$.lastName</path><content>${#TestCase#lastName2}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="4a6ff63f-d980-4fcd-9e82-d9ae3fe666d2" name="JsonPath Match username"><con:configuration><path>$.username</path><content>${#TestCase#username}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="1d93b030-f897-460e-a3a5-0bdca3d5629a" name="JsonPath Match password" disabled="true"><con:configuration><path>$.password</path><content>${#TestCase#newPass}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="userId" value="${#TestCase#user_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="getNewXSRF4" id="78f7535e-4db8-41d4-8d50-df8e78666771"><con:settings/><con:config><script>testRunner.runTestStepByName("getXSRF")</script></con:config></con:testStep><con:testStep type="calltestcase" name="Run TestCase-user" id="27024968-b1fa-492d-be12-327fec5176a3" disabled="true"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>5022c9f6-3cdc-4421-9e69-bb852462d0df</con:targetTestCase><con:properties><con:property><con:name>token_xsrf</con:name></con:property><con:property><con:name>token_auth</con:name></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="deleteUser" id="323568f2-d490-4a59-a3b5-66f45e579991"><con:settings/><con:config service="Shanoir NG Users Microservice" resourcePath="/user/{userId}" methodName="deleteUser" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="deleteUser" id="904c0c10-4f1b-41f2-b2ea-497ddabfd3db" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="x-xsrf-token" value="${#TestCase#token_xsrf}"/>
  &lt;con:entry key="x-auth-token" value="${#TestCase#token_auth}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://localhost/user/19</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="3c7060d6-a8c7-41ca-b3ec-a321a1c917b1" name="Valid HTTP Code 204"><con:configuration><codes>204</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="userId" value="${#TestCase#user_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="findUserById2" id="6f41e70a-9d2e-4697-8dd3-faea6c1413a3"><con:settings/><con:config service="Shanoir NG Users Microservice" resourcePath="/user/{userId}" methodName="findUserById" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="findUserById2" id="8d3913ac-2ce3-4a6f-892f-9ebbd5d2cb37" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="x-auth-token" value="${#TestCase#token_auth}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://localhost/user/19</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="9cefdfa8-6d0d-44c6-b749-bf9ae39e7289" name="Valid HTTP Status Codes"><con:configuration><codes>404</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="userId" value="${#TestCase#user_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="findUsers2" id="00c90347-9aed-4089-9462-420be8b2dabc"><con:settings/><con:config service="Shanoir NG Users Microservice" resourcePath="/user/all" methodName="findUsers" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="findUsers2" id="cb15771f-5c75-4a50-9843-73a0ded906bc" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="x-auth-token" value="${#TestCase#token_auth}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e03b4f24-c953-4eb4-8a9a-55292d0bbc5a" name="Valid HTTP Status Codes"><con:configuration><codes>200, 204</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>token_auth</con:name><con:value>admin:1480741518880:8c05f5c309abb54be989baa61c915a18</con:value></con:property><con:property><con:name>token_xsrf</con:name><con:value>bca2fbcb-30cb-4751-8ebf-6e2337e881fa</con:value></con:property><con:property><con:name>user_id</con:name><con:value>81</con:value></con:property><con:property><con:name>firstName</con:name><con:value>First Name test</con:value></con:property><con:property><con:name>lastName</con:name><con:value>Last Name test</con:value></con:property><con:property><con:name>firstName2</con:name><con:value>${#Project#firstName}</con:value></con:property><con:property><con:name>lastName2</con:name><con:value>${#Project#lastName}</con:value></con:property><con:property><con:name>email</con:name><con:value>${#Project#email}</con:value></con:property><con:property><con:name>username</con:name><con:value>${#Project#username}</con:value></con:property><con:property><con:name>pass</con:name><con:value>Shanoir@2016!</con:value></con:property><con:property><con:name>newPass</con:name><con:value>${#Project#username_password}</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="fb590266-a801-4d56-a3b3-3248b329939e" name="REST Shanoir-NG (user)"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="5022c9f6-3cdc-4421-9e69-bb852462d0df" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase-user" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="auth" id="6dd1c948-66e8-4436-b1ab-f9a62ce068bd"><con:settings/><con:config service="Shanoir NG Users Microservice" resourcePath="/authenticate" methodName="authenticate" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="auth" id="ba658792-6420-46dc-95dd-7a517291e9c9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#endpoint}</con:endpoint><con:request>{
	"login": "${#Project#username}",
	"password": "${#Project#username_password}"
	
	}</con:request><con:originalUri>http://localhost/shanoir-ng/users/authenticate</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="372f8373-b7bc-43d9-80b5-2f037180866b" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Existence Match" id="b74ae24c-1936-4230-adc4-41ab2884e7bc" name="JsonPath Existence Match"><con:configuration><path>$.token</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="9511342d-9e84-4e23-99d0-e3e1043ae8d4" name="JsonPath Match"><con:configuration><path>$.login</path><content>${#Project#username}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="getXSRF" id="4a69dee9-1418-4763-829a-ef5124c1e62f"><con:settings/><con:config><script>def getXSRF () {
	currentStepId = context.currentStepIndex
	responseContent = testRunner.testCase.getTestStepAt(currentStepId - 1)
	responseContent = responseContent.httpRequest.response.responseHeaders['Set-Cookie'];
	token_xsrf = responseContent[-1].replace('XSRF-TOKEN=','').replace(';path=/','');
	testRunner.testCase.setPropertyValue( 'token_xsrf', token_xsrf );
	return token_xsrf
}

log.info (getXSRF())
</script></con:config></con:testStep><con:testStep type="groovy" name="getAUTH" id="9448cfef-f201-4a20-8d34-02b9d4703d95"><con:settings/><con:config><script>import groovy.json.JsonSlurper
def getAUTH (){
	responseContent = testRunner.testCase.getTestStepByName("auth").getPropertyValue("response")
	token_auth = new JsonSlurper().parseText(responseContent).token
	testRunner.testCase.setPropertyValue( 'token_auth', token_auth );
	
	return token_auth
}

log.info( getAUTH() );

</script></con:config></con:testStep><con:testStep type="restrequest" name="findUserById" id="28efd295-18cf-4c1e-8fa9-51281c3d6ecf"><con:settings/><con:config service="Shanoir NG Users Microservice" resourcePath="/user/{userId}" methodName="findUserById" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="findUserById" id="8d3913ac-2ce3-4a6f-892f-9ebbd5d2cb37" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="x-auth-token" value="${#TestCase#token_auth}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://localhost/user/19</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="9cefdfa8-6d0d-44c6-b749-bf9ae39e7289" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="6fbc5e20-1c99-4d9a-aa21-4b464067e408" name="JsonPath Match id"><con:configuration><path>$.id</path><content>${#Project#username_id}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="4a6ff63f-d980-4fcd-9e82-d9ae3fe666d2" name="JsonPath Match username"><con:configuration><path>$.username</path><content>${#Project#username}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="userId" value="${#Project#username_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="getNewXSRF4" id="3caf23c2-1451-493e-bc93-a09f4ae86fbe"><con:settings/><con:config><script>testRunner.runTestStepByName("getXSRF")</script></con:config></con:testStep><con:testStep type="restrequest" name="updateUser" id="1b4fefe0-03fb-4672-ac80-52ad138b8a77"><con:settings/><con:config service="Shanoir NG Users Microservice" resourcePath="/user/{userId}" methodName="updateUser" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="updateUser" id="10b23131-3af2-4785-9400-5a8d813bd785" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="x-auth-token" value="${#TestCase#token_auth}"/>
  &lt;con:entry key="x-xsrf-token" value="${#TestCase#token_xsrf}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#endpoint}</con:endpoint><con:request>{
	"id" : "${#Project#username_id}",
	"username" : "${#Project#username}",
	"password" : "Bocian07_!",
	"firstName" : "${#Project#firstName}",
	"lastName" : "${#Project#lastName}",
	"email" : "${#Project#email}",
	"creationDate" : "2016-11-28",
	"role" : {
      "id": 4,
      "displayName": "Expert"
   }

}</con:request><con:originalUri>http://localhost/user/</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b08d75f6-de2d-4844-9e0b-00d25ff53076" name="Valid HTTP Code 204"><con:configuration><codes>204</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="userId" value="${#Project#username_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>token_xsrf</con:name><con:value>f68c74e3-1b1f-4ac4-8179-a7ab47c17886</con:value></con:property><con:property><con:name>token_auth</con:name><con:value>test:1480739742220:3847509f508270663218009523e5f154</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:properties><con:property><con:name>endpoint</con:name><con:value>http://localhost:9900</con:value></con:property><con:property><con:name>login</con:name><con:value>admin</con:value></con:property><con:property><con:name>password</con:name><con:value>02221336298213</con:value></con:property><con:property><con:name>username</con:name><con:value>test</con:value></con:property><con:property><con:name>username_password</con:name><con:value>Shanoir@2016!</con:value></con:property><con:property><con:name>username_id</con:name><con:value>81</con:value></con:property><con:property><con:name>email</con:name><con:value>testsautofli@gmail.com</con:value></con:property><con:property><con:name>firstName</con:name><con:value>fname test</con:value></con:property><con:property><con:name>lastName</con:name><con:value>lastname test</con:value></con:property></con:properties><con:wssContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/><con:sensitiveInformation/></con:soapui-project>